
---
## Ресурсы:
1. Данные конспекты выкладывались ранее [тут](https://vk.com/lambda_brain_not_null) (сейчас данные материалы уже не доступны)
2. Оригинал заметки лежит в этом репозитории по адресу `resource/lambda-brain-not-null/lambda-brain-not-null-22-why-refuse-to-store-logical-inbase.zip

---

За мои 45 лет работы в ИТ могу сказать определённо только одно: **есть очень мало вещей в программировании, которые однозначно и безоговорочно можно считать хорошей идеей**. Почти всегда всё зависит от ситуации и контекста использования.

Ну например, как вам такая идея, как **отказ от хранения логических значений в базе**? Что-то, конечно, вместо них всё равно надо хранить, но что? **Временные метки** -- и вот это одна из тех вещей, о которых можно сказать, что это именно то, что не так уж и сильно зависит от контекста.  
У многих разработчиков с хорошим опытом, вероятно, возникали ситуации, когда они хранили в базе чистые булевы значения, а позже жалели, что не поставили вместо них временную метку -- а чаще всего, добавляли в базу дополнительное поле с временем. И не было ни одного случая, когда я хранил временную метку и потом жалел бы об этом.

В чём обычно специфика булевых значений? В том, что каждый раз, когда некоторая порция данных оказывается достаточно важной для того, чтобы хранить её истинность/ложность в базе данных, она, вероятно, достаточно важна, чтобы вы в конечном итоге захотели узнать, **а когда это состояние было установлено**. Это получается полной противоположностью YAGNI, ну вот мой подход в целом такой, что **лучше вкладываться в информационную избыточность, чем выдумывать хитроумные алгоритмы**. Хотя в данном случае информационной избыточности как раз не возникает, и вот почему.

Даже в том редком случае, если вам никогда не понадобится эта временная метка... что вы потеряли? Ее "стоимость" ничтожно мала -- как в плане хранения данных, так и в плане накладных расходов на программирование. Ваш код просто должен рассматривать поле с временной меткой, в котором "хранится" NULL как ложное значение (хотя в целом я против использования NULL), а любую временную метку не NULL -- как истинную. Вот и всё.

Например, у меня в таблице курсантов было поле ban, по которому фильтруются неактивные пользователи, блокируется доступ к учебному сервису, показывается полноценная информация или сообщение о бане, и т. п. Но при этом примерно 10% слившихся учеников ко мне возвращаются обратно спустя полгода, год, а то и три года :) И информация, а когда человек получил бан, сама по себе имеет некоторую ценность. У меня имеется ещё персональная локальная базка данных, где я веду по занимающимся более подробные дневники, и с которой я координировался по времени бана, но оказалось гораздо удобнее придерживаться вышеупомянутой схемы. Теперь это поле целочисленное, и хранит либо unix-время бана в секундах, либо 0 (активен). А в коде вместо флажка этого поля появились функции `isBan()` и `banAt()`.

Рекомендую. Поживите с этим подходом некоторое время, а затем спросите себя, не жалеете ли вы о принятом решении.  
Будущее скажет вам спасибо.

---

Пример. Было:

| Поле               | Тип данных | Описание                                       |
|--------------------|------------|------------------------------------------------| 
| gnome_id           | INT        | Уникальный идентификатор гнома                 |
| activity_type      | VARCHAR    | Тип активности (например, "сбор ресурсов")     |
| is_active          | BOOLEAN    | Флаг, указывающий, активен ли гном             |
| is_completed       | BOOLEAN    | Флаг, указывающий, завершена ли активность     |
| is_reward_claimed  | BOOLEAN    | Флаг, указывающий, получено ли вознаграждение  |

Стало:

| Поле               | Тип данных | Описание                                     |
|--------------------|------------|----------------------------------------------|
| gnome_id           | INT        | Уникальный идентификатор гнома               |
| activity_type      | VARCHAR    | Тип активности (например, "сбор ресурсов")   |
| active_since       | INT        | Когда гном стал активен                      |
| completed_at       | INT        | Когда активность была завершена              |
| reward_claimed_at  | INT        | Когда было получено вознаграждение           |

Эти изменения позволяют более точно отслеживать и организовывать временнЫе аспекты активностей гномов. А если вам требуется False, просто запишите в соответствующее поле 0.